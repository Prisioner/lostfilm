## Консольный клиент для lostfilm.tv
Позволяет отслеживать обновление любимых сериалов на сайте [Lostfilm.tv](https://www.lostfilm.tv/) и скачивать `torrent`-файлы автоматически. Останется только закинуть их в `torrent`-клиент!

### Запуск и использование
Для запуска необходимо:
+ Ruby (программа была написана и протестирована на версии 2.4.1)
+ SQLite

Команда для запуска из консоли:
```
ruby lostfilm.rb [options]
```

Список возможных опций есть ниже.

### Начало использования
При первом запуске необходимо пройти авторизацию, для этого наберите:

```
ruby lostfilm.rb --login
```

Введите email и пароль от учетной записи Lostfilm.tv. Программа **не** сохраняет email и пароль.

Далее можно запускать программу в стандартном режиме:

```
ruby lostfilm.rb
```

### Как это работает
При запуске в стандартном режиме программа запросит с сайта Lostfilm список избранных сериалов. Затем проверит список серии и найдёт те, которые ранее не скачивались - и скачает их.

### Нюансы работы
+ Если сериал находится в "Избранном" на Lostfilm (произошла смена статуса) - при синхронизации списка сериалов он по умолчанию попадает в отслеживаемые
+ Если сериал убран из "Избранных" на Lostfilm (произошла смена статуса) - при синхронизации списка сериалов он будет исключен из списка отслеживаемых
+ Если серия отмечена на Lostfilm как просмотренная - она автоматически попадает в список ранее скачанных и не будет скачана повторно

### Список возможных опций
+ `--help` - вывод справки, включая возможные параметры опций и сокращенные ключи
+ `--login` - запускает процесс авторизации
+ `--get-series-list` - загрузить список сериалов
+ `--follow ID` - добавляет сериал в список отслеживаемых (можно указать несколько ID через запятую)
+ `--unfollow ID` - убирает сериал из списка отслеживаемых (можно указать несколько ID через запятую)
+ `--list` - выводит список отслеживаемых сериалов

### Настройка "под себя"
После первого запуска программы в корневом каталоге будет создан файл `config.yml`, который можно открыть в любом текстовом редакторе и внести корректировку в настройки.
+ `:session:` - cookie-сессия для подключения к Lostfilm - вручную редактировать не стоит
+ `:db_path:` - путь к файлу, в котором сохраняется БД SQLite
+ `:download_folder:` - путь к папке, в которую скачиваются `torrent`-файлы
+ `:quality_priority:` - приоритет качества для выбора `torrent`-файлов. Будет скачан первый из найденных файлов согласно приоритету (у некоторых старых сериалов есть файлы только в SD качестве)
+ `:series_list_autoupdate:` - автоматическое обновление списка сериалов перед скачиванием новых эпизодов.
+ `:original_titles:` - true - выводит английские названия сериалов, false - русские.
